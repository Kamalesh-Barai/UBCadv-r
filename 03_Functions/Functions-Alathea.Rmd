---
title: "Functions"
author: "Alathea"
date: '2014-07-16'
output: 
  html_document:
    keep_md: yes
    toc: yes
---

***

## Exercises

### What function allows you to tell if an object is a function? What function allows you to tell if a function is a primitive function?

`str` or `is.function` will identify functions.  `is.primitive` tells whether or not a function is primitive.

### This code makes a list of all functions in the base package.

```{r ex_function_list}
objs <- mget(ls("package:base"), inherits = TRUE)
funs <- Filter(is.function, objs)
```

### Use it to answer the following questions:

#### Which base function has the most arguments?

The arguments can be obtained using the function `formals`.

```{r most_arguments}
require(plyr)

# create a vector of lengths
arg_length <- laply(funs, function(x)(length(formals(x))))

# find the max
max_args <- which(arg_length == max(arg_length))

# get the name of the function
names(funs[max_args])
```

#### How many base functions have no arguments? What’s special about those functions.

```{r no_arguments}
length(which(arg_length == 0))
```

#### How could you adapt the code to find all primitive functions?

```{r find_primitives}
prims <- Filter(is.primitive, objs)
names(prims)
```

### What are the three important components of a function?

`formals()`: the arguments
`body()`: the function content
`environment()`: the environment where the variables are stored

### When does printing a function not show what environment it was created in?

If the function has a custom print method, or if it is a primitive function.

***

## Reading Notes

### Quiz

#### What are the three components of a function?

body, formals, environment

#### What does the following code return?

```{r quiz1, eval = FALSE}
y <- 10
f1 <- function(x) {
  function() {
    x + 10
  }
}
f1(1)()
```

11

#### How would you more typically write this code?
**`` `+`(1, `*`(2, 3))``**

I think `1 + (2 * 3)`

#### How could you make this call easier to read?
**`mean(, TRUE, x = c(1:10, NA))`**



#### Does the following function throw an error when called?  Why/why not?
```{r quiz2, eval = FALSE}
f2 <- function(a, b) {
  a * 10
}
f2(10, stop("This is an error!"))
```



#### What is an infix function? How do you write it? What’s a replacement function? How do you write it?



#### What function do you use to ensure that a cleanup action occurs regardless of how a function terminates?


### Function components

body, formals, environment

functions can have a custom print method (as in modeling functions)

primitive functions do not have the three components; different methods are used to match arguments:
* `switch` = chooses an argument based on a given expression
* `call`

***

## Discussion Notes

***